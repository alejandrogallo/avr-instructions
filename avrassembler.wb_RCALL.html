<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>
   RCALL - Relative Call to Subroutine -  - AVR Assembler
  </title>
  <!--[if IE]>
	<![endif]-->
 </head>
 <body>
  <div id="header">
   </a>
   <h1>
    AVR Assembler
    Instructions
   </h1>
  </div>
  <div id="content">
   <!-- -->
   <div class="section">
    <div class="titlepage" xmlns="">
     <div>
      <div>
       <h2 class="title" style="clear: both" xmlns="http://www.w3.org/1999/xhtml">
        <a id="avrassembler.wb_RCALL">
        </a>
        <abbr class="abbrev">
         <a id="avrassembler.wb_RCALL1">
         </a>
         RCALL
        </abbr>
        - Relative Call to Subroutine
       </h2>
      </div>
     </div>
    </div>
    <h3>
     <a id="N17F61">
     </a>
     Description:
    </h3>
    <p>
     Relative call to an address within PC - 2K + 1 and PC + 2K (words). The return address (the instruction after the RCALL) is stored onto the stack. (See also
     <a class="xref" href="avrassembler.wb_CALL.html" title="CALL - Long Call to a Subroutine">
      CALL
     </a>
     ). In the assembler, labels are used instead of relative operands. For AVR microcontrollers with program memory not exceeding 4K words (8K bytes) this instruction can address the entire memory from every address location. The stack pointer uses a post-decrement scheme during RCALL.
    </p>
    <p>
     Operation:
    </p>
    <p>
     (i)PC ← PC + k + 1 Devices with 16 bits PC, 128K bytes program memory maximum.
    </p>
    <p>
     (ii)PC ← PC + k + 1 Devices with 22 bits PC, 8M bytes program memory maximum.
    </p>
    <p>
     Syntax: Operands: Program Counter: Stack:
    </p>
    <p>
     (i) RCALL k -2K ≤ k &lt; 2K PC ← PC + k + 1 STACK ← PC + 1
    </p>
    <p>
     SP ← SP - 2 (2 bytes, 16 bits)
    </p>
    <p>
     (ii)RCALL k -2K ≤ k &lt; 2K PC ← PC + k + 1 STACK ← PC + 1
    </p>
    <p>
     SP ← SP - 3 (3 bytes, 22 bits)
    </p>
    <p>
     16-bit Opcode:
    </p>
    <div class="informaltable">
     <table border="1">
      <colgroup>
       <col class="col1"/>
       <col class="col2"/>
       <col class="col3"/>
       <col class="col4"/>
      </colgroup>
      <tbody>
       <tr>
        <td>
         <p>
          1101
         </p>
        </td>
        <td>
         <p>
          kkkk
         </p>
        </td>
        <td>
         <p>
          kkkk
         </p>
        </td>
        <td>
         <p>
          kkkk
         </p>
        </td>
       </tr>
      </tbody>
     </table>
    </div>
    <h3>
     <a id="N17FA0">
     </a>
     Status Register (SREG) and Boolean
Formula:
    </h3>
    <div class="informaltable">
     <table border="1">
      <colgroup>
       <col class="col1"/>
       <col class="col2"/>
       <col class="col3"/>
       <col class="col4"/>
       <col class="col5"/>
       <col class="col6"/>
       <col class="col7"/>
       <col class="col8"/>
      </colgroup>
      <thead>
       <tr>
        <th>
         <p>
          I
         </p>
        </th>
        <th>
         <p>
          T
         </p>
        </th>
        <th>
         <p>
          H
         </p>
        </th>
        <th>
         <p>
          S
         </p>
        </th>
        <th>
         <p>
          V
         </p>
        </th>
        <th>
         <p>
          N
         </p>
        </th>
        <th>
         <p>
          Z
         </p>
        </th>
        <th>
         <p>
          C
         </p>
        </th>
       </tr>
      </thead>
      <tbody>
       <tr>
        <td>
         <p>
          -
         </p>
        </td>
        <td>
         <p>
          -
         </p>
        </td>
        <td>
         <p>
          -
         </p>
        </td>
        <td>
         <p>
          -
         </p>
        </td>
        <td>
         <p>
          -
         </p>
        </td>
        <td>
         <p>
          -
         </p>
        </td>
        <td>
         <p>
          -
         </p>
        </td>
        <td>
         <p>
          -
         </p>
        </td>
       </tr>
      </tbody>
     </table>
    </div>
    <p>
     Example:
    </p>
    <pre class="programlisting">rcall routine ; Call subroutine
...
 routine: push r14 ; Save r14 on the stack
...
pop r14 ; Restore r14
ret ; Return from subroutine</pre>
    <p>
    </p>
    <p>
     Words:1 (2 bytes)
    </p>
    <p>
     Cycles:
    </p>
    <div class="informaltable">
     <table border="1">
      <colgroup>
       <col class="col1"/>
       <col class="col2"/>
       <col class="col3"/>
       <col class="col4"/>
      </colgroup>
      <thead>
       <tr>
        <th>
        </th>
        <th>
         <p>
          Cycles
         </p>
        </th>
        <th>
         <p>
          Cycles xmega
         </p>
        </th>
        <th>
         <p>
          Cycles AVR8L
         </p>
        </th>
       </tr>
      </thead>
      <tbody>
       <tr>
        <td>
         <p>
          Devices with 16-bit PC
         </p>
        </td>
        <td>
         <p>
          3
         </p>
        </td>
        <td>
         <p>
          2
         </p>
        </td>
        <td>
         <p>
          4
         </p>
        </td>
       </tr>
       <tr>
        <td>
         <p>
          Devices with 22-bit PC
         </p>
        </td>
        <td>
         <p>
          4
         </p>
        </td>
        <td>
         <p>
          3
         </p>
        </td>
        <td>
         <p>
          N/A
         </p>
        </td>
       </tr>
      </tbody>
     </table>
    </div>
   </div>
